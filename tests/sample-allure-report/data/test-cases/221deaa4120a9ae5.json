{"uid":"221deaa4120a9ae5","name":"Given: an event type; When: a message with problem 'terminated room' is published; Then: publish fails with 404: 'Room was not found' ","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type; When: a message with problem '#problem' is published; Then: publish fails with #errorCode: '#errorMessage' ","historyId":"4cc5de999dda7f7f0dfd1f2d110f2c36","time":{"start":1697105220767,"stop":1697105220918,"duration":151},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type","time":{"start":1697105220832,"stop":1697105220832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: message with a problem is published","time":{"start":1697105220832,"stop":1697105220832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105220833,"stop":1697105220837,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n UPDATE rooms\nSET deleted_at = now()\nWHERE id = '018b235a-94c4-73a4-94c3-49fda6919e0b'","time":{"start":1697105220833,"stop":1697105220833,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"UPDATE rooms\nSET deleted_at = now()\nWHERE id = '018b235a-94c4-73a4-94c3-49fda6919e0b'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@1558b8e7"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-949f-7fec-91a9-f4a42c25df7f/room-018b235a-949f-7fec-91a9-f4a42c25df7f/publish","time":{"start":1697105220837,"stop":1697105220877,"duration":40},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-949f-7fec-91a9-f4a42c25df7f/room-018b235a-949f-7fec-91a9-f4a42c25df7f/publish","time":{"start":1697105220837,"stop":1697105220877,"duration":40},"status":"passed","steps":[],"attachments":[{"uid":"2ebcf622e3254eba","name":"Request","source":"2ebcf622e3254eba.html","type":"text/html","size":1160},{"uid":"925d4af57cbb10","name":"HTTP/1.1 404 Not Found","source":"925d4af57cbb10.html","type":"text/html","size":351}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-949f-7fec-91a9-f4a42c25df7f"},{"name":"roomId","value":"room-018b235a-949f-7fec-91a9-f4a42c25df7f"},{"name":"message","value":"{eventType=EVENT-018b235a-949f-7fec-91a9-f4a42c25df7f, content={payload=test}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-949f-7fec-91a9-f4a42c25df7f"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-949f-7fec-91a9-f4a42c25df7f"},{"name":"roomId","value":"room-018b235a-949f-7fec-91a9-f4a42c25df7f"},{"name":"message","value":"{eventType=EVENT-018b235a-949f-7fec-91a9-f4a42c25df7f, content={payload=test}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: publish fails","time":{"start":1697105220877,"stop":1697105220877,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: no events created","time":{"start":1697105220913,"stop":1697105220913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105220913,"stop":1697105220918,"duration":5},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105220913,"stop":1697105220918,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-94c4-73a4-94c3-49fda6919e0b'\n  AND event_type_version_id = '018b235a-94ce-7a11-9276-32f831aacdba'\n  AND event_type_id = '018b235a-94c9-7e1c-9f1a-3f3d1ba80a58'\n  AND publisher_id = '018b235a-94d4-71fb-8fdb-786e1d906950'","time":{"start":1697105220913,"stop":1697105220913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-94c4-73a4-94c3-49fda6919e0b'\n  AND event_type_version_id = '018b235a-94ce-7a11-9276-32f831aacdba'\n  AND event_type_id = '018b235a-94c9-7e1c-9f1a-3f3d1ba80a58'\n  AND publisher_id = '018b235a-94d4-71fb-8fdb-786e1d906950'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6fb1dd9d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105220918,"stop":1697105220918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-94c4-73a4-94c3-49fda6919e0b'\n  AND event_type_version_id = '018b235a-94ce-7a11-9276-32f831aacdba'\n  AND event_type_id = '018b235a-94c9-7e1c-9f1a-3f3d1ba80a58'\n  AND publisher_id = '018b235a-94d4-71fb-8fdb-786e1d906950'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"where","time":{"start":1697105220918,"stop":1697105220918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":13},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type; When: a message with problem 'terminated room' is published; Then: publish fails with 404: 'Room was not found' "},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.1 - Unsuccessful publish"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"errorCode","value":"404"},{"name":"errorMessage","value":"Room was not found"},{"name":"problem","value":"terminated room"}],"links":[{"name":"UC6.1","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"221deaa4120a9ae5.json","parameterValues":["404","Room was not found","terminated room"]}