{"uid":"5b73001f1151d40a","name":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=ACTIVE subscriptions; Then: listing of subscription succeeds and ACTIVE subscriptions are returned","fullName":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests.Given: a member with subscriptions in different statuses in a room; When: member lists their status=#status subscriptions; Then: listing of subscription succeeds and #returnedStatus subscriptions are returned","historyId":"4356f6f7d478a6fae6d7ec129ab7d241","time":{"start":1697105197902,"stop":1697105198681,"duration":779},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: a member with subscriptions in different statuses in a room","time":{"start":1697105197980,"stop":1697105197980,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105197982,"stop":1697105197989,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3b9d-78b2-a61b-a575663570cf', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3b9c-7a73-9d53-08c4f007b73f\"}', '[{\"at\": \"2023-10-12T10:06:37.982874200Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105197982,"stop":1697105197982,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3b9d-78b2-a61b-a575663570cf', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3b9c-7a73-9d53-08c4f007b73f\"}', '[{\"at\": \"2023-10-12T10:06:37.982874200Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@30722243"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105197990,"stop":1697105197996,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ba6-7894-8dea-68ccaa7a4b43', '018b235a-3b9d-78b2-a61b-a575663570cf', 'PENDING', now())","time":{"start":1697105197990,"stop":1697105197990,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ba6-7894-8dea-68ccaa7a4b43', '018b235a-3b9d-78b2-a61b-a575663570cf', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@122e63ae"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105197998,"stop":1697105198003,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bad-7b3d-886c-e6b9ce8faccb', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bad-743f-8fbe-a75d615ef2c5\"}', '[{\"at\": \"2023-10-12T10:06:37.997606700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105197998,"stop":1697105197998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bad-7b3d-886c-e6b9ce8faccb', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bad-743f-8fbe-a75d615ef2c5\"}', '[{\"at\": \"2023-10-12T10:06:37.997606700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@8cc682f"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198004,"stop":1697105198010,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bb4-7d9e-a754-19c842917f4b', '018b235a-3bad-7b3d-886c-e6b9ce8faccb', 'PENDING', now())","time":{"start":1697105198004,"stop":1697105198004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bb4-7d9e-a754-19c842917f4b', '018b235a-3bad-7b3d-886c-e6b9ce8faccb', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@53de80b9"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198010,"stop":1697105198029,"duration":19},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bba-701b-82a9-67a563724921', '018b235a-3bad-7b3d-886c-e6b9ce8faccb', 'ACTIVE', now())","time":{"start":1697105198010,"stop":1697105198010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bba-701b-82a9-67a563724921', '018b235a-3bad-7b3d-886c-e6b9ce8faccb', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@721fc0bb"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198030,"stop":1697105198045,"duration":15},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bcd-709a-803d-816610102d39', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bcd-7619-b61d-5617e0208cea\"}', '[{\"at\": \"2023-10-12T10:06:38.030155100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198030,"stop":1697105198030,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bcd-709a-803d-816610102d39', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bcd-7619-b61d-5617e0208cea\"}', '[{\"at\": \"2023-10-12T10:06:38.030155100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@13cdee45"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198045,"stop":1697105198051,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bdd-773f-a507-3eb4efc1adf7', '018b235a-3bcd-709a-803d-816610102d39', 'PENDING', now())","time":{"start":1697105198045,"stop":1697105198045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bdd-773f-a507-3eb4efc1adf7', '018b235a-3bcd-709a-803d-816610102d39', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@78ab6103"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198052,"stop":1697105198058,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3be3-780a-9f9d-c8ba87cfde4c', '018b235a-3bcd-709a-803d-816610102d39', 'ACTIVE', now())","time":{"start":1697105198052,"stop":1697105198052,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3be3-780a-9f9d-c8ba87cfde4c', '018b235a-3bcd-709a-803d-816610102d39', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@5f57fde7"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198058,"stop":1697105198065,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bea-7f32-80ad-966238ac1393', '018b235a-3bcd-709a-803d-816610102d39', 'TERMINATED', now())","time":{"start":1697105198058,"stop":1697105198058,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bea-7f32-80ad-966238ac1393', '018b235a-3bcd-709a-803d-816610102d39', 'TERMINATED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@53c1f4ae"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198066,"stop":1697105198072,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bf1-7b9d-a391-83d8e5b7e778', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bf1-78cf-a4fc-92484be8889a\"}', '[{\"at\": \"2023-10-12T10:06:38.065886300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198066,"stop":1697105198066,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3bf1-7b9d-a391-83d8e5b7e778', '018b235a-3b7f-770c-b56c-da1d356a1fa9', '018b235a-3b88-7987-9c58-750b58a9ab5c', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3bf1-78cf-a4fc-92484be8889a\"}', '[{\"at\": \"2023-10-12T10:06:38.065886300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2f829755"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198072,"stop":1697105198082,"duration":10},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bf8-785e-904d-01cb670c9552', '018b235a-3bf1-7b9d-a391-83d8e5b7e778', 'PENDING', now())","time":{"start":1697105198073,"stop":1697105198073,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3bf8-785e-904d-01cb670c9552', '018b235a-3bf1-7b9d-a391-83d8e5b7e778', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@c0248df"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198083,"stop":1697105198094,"duration":11},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3c02-7c48-b8b8-644637399e06', '018b235a-3bf1-7b9d-a391-83d8e5b7e778', 'REJECTED', now())","time":{"start":1697105198083,"stop":1697105198083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3c02-7c48-b8b8-644637399e06', '018b235a-3bf1-7b9d-a391-83d8e5b7e778', 'REJECTED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6c5a347d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: member lists their subscriptions","time":{"start":1697105198095,"stop":1697105198095,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8/room-018b235a-3b4f-7563-8412-58a9fe797ad8/subscriptions","time":{"start":1697105198096,"stop":1697105198205,"duration":109},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8/room-018b235a-3b4f-7563-8412-58a9fe797ad8/subscriptions","time":{"start":1697105198096,"stop":1697105198205,"duration":109},"status":"passed","steps":[],"attachments":[{"uid":"be0b187765b52dd1","name":"Request","source":"be0b187765b52dd1.html","type":"text/html","size":785},{"uid":"c09a50935baddfaa","name":"HTTP/1.1 200 ","source":"c09a50935baddfaa.html","type":"text/html","size":1509}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8"},{"name":"roomId","value":"room-018b235a-3b4f-7563-8412-58a9fe797ad8"},{"name":"status","value":"ACTIVE"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3b4f-7563-8412-58a9fe797ad8"},{"name":"roomId","value":"room-018b235a-3b4f-7563-8412-58a9fe797ad8"},{"name":"status","value":"ACTIVE"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: listing of subscription succeeds","time":{"start":1697105198205,"stop":1697105198205,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: correct subscriptions are returned","time":{"start":1697105198206,"stop":1697105198206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105198680,"stop":1697105198680,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":31},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests"},{"name":"testMethod","value":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=ACTIVE subscriptions; Then: listing of subscription succeeds and ACTIVE subscriptions are returned"},{"name":"suite","value":"ListSubscriptionsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC4.2 - Successful subscriptions listing"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/subscriptions"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"returnedStatus","value":"ACTIVE"},{"name":"returnedSubscriptionsCount","value":"1"},{"name":"status","value":"ACTIVE"}],"links":[{"name":"UC4.2","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"5b73001f1151d40a.json","parameterValues":["ACTIVE","1","ACTIVE"]}