{"uid":"cf91efc2e4841f8e","name":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=REJECTED subscriptions; Then: listing of subscription succeeds and REJECTED subscriptions are returned","fullName":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests.Given: a member with subscriptions in different statuses in a room; When: member lists their status=#status subscriptions; Then: listing of subscription succeeds and #returnedStatus subscriptions are returned","historyId":"99cc626fe8685a1067a782be084665f9","time":{"start":1697105199616,"stop":1697105200281,"duration":665},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: a member with subscriptions in different statuses in a room","time":{"start":1697105199766,"stop":1697105199766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105199768,"stop":1697105199774,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-4297-7aaf-bf08-6a3d8f360550', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-4296-7de8-bb99-35f131d9f017\"}', '[{\"at\": \"2023-10-12T10:06:39.768043400Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105199768,"stop":1697105199768,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-4297-7aaf-bf08-6a3d8f360550', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-4296-7de8-bb99-35f131d9f017\"}', '[{\"at\": \"2023-10-12T10:06:39.768043400Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@21a1790d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199775,"stop":1697105199780,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-429e-74c3-99da-d0ba3547ad41', '018b235a-4297-7aaf-bf08-6a3d8f360550', 'PENDING', now())","time":{"start":1697105199775,"stop":1697105199775,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-429e-74c3-99da-d0ba3547ad41', '018b235a-4297-7aaf-bf08-6a3d8f360550', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@24d6355c"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199781,"stop":1697105199787,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42a5-7db8-bf93-89f95c668b93', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42a4-7148-8432-22a8ca4e17ac\"}', '[{\"at\": \"2023-10-12T10:06:39.781744300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105199781,"stop":1697105199781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42a5-7db8-bf93-89f95c668b93', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42a4-7148-8432-22a8ca4e17ac\"}', '[{\"at\": \"2023-10-12T10:06:39.781744300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@69e4e90b"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199787,"stop":1697105199791,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42ab-7b6e-8e5b-5ac0d112b39b', '018b235a-42a5-7db8-bf93-89f95c668b93', 'PENDING', now())","time":{"start":1697105199787,"stop":1697105199787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42ab-7b6e-8e5b-5ac0d112b39b', '018b235a-42a5-7db8-bf93-89f95c668b93', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@5872376d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199791,"stop":1697105199796,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42af-7ad9-95b2-f28e66117900', '018b235a-42a5-7db8-bf93-89f95c668b93', 'ACTIVE', now())","time":{"start":1697105199791,"stop":1697105199791,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42af-7ad9-95b2-f28e66117900', '018b235a-42a5-7db8-bf93-89f95c668b93', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@7231547f"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199797,"stop":1697105199802,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42b4-726c-a7cc-35dc85fa7b90', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42b4-7379-884b-6374264e7c8c\"}', '[{\"at\": \"2023-10-12T10:06:39.796088800Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105199797,"stop":1697105199797,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42b4-726c-a7cc-35dc85fa7b90', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42b4-7379-884b-6374264e7c8c\"}', '[{\"at\": \"2023-10-12T10:06:39.796088800Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@67d8e3b0"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199802,"stop":1697105199808,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42ba-7772-a20e-64888b06d595', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'PENDING', now())","time":{"start":1697105199803,"stop":1697105199803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42ba-7772-a20e-64888b06d595', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@293af2f1"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199808,"stop":1697105199813,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42c0-7181-92aa-0485820a195d', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'ACTIVE', now())","time":{"start":1697105199808,"stop":1697105199808,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42c0-7181-92aa-0485820a195d', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@60ba61e4"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199813,"stop":1697105199817,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42c5-7ac6-b98b-23af49418bd7', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'TERMINATED', now())","time":{"start":1697105199813,"stop":1697105199813,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42c5-7ac6-b98b-23af49418bd7', '018b235a-42b4-726c-a7cc-35dc85fa7b90', 'TERMINATED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@18505320"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199819,"stop":1697105199826,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42cb-744e-b1b9-0ca32d402961', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42ca-7ff0-afc2-f5bdb5635f11\"}', '[{\"at\": \"2023-10-12T10:06:39.819414600Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105199819,"stop":1697105199819,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-42cb-744e-b1b9-0ca32d402961', '018b235a-4273-7210-b0c4-cbc2673e1cf9', '018b235a-4280-7709-91be-0756c628728e', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-42ca-7ff0-afc2-f5bdb5635f11\"}', '[{\"at\": \"2023-10-12T10:06:39.819414600Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@7560ca1d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199827,"stop":1697105199831,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42d2-790e-ba86-577f04152a08', '018b235a-42cb-744e-b1b9-0ca32d402961', 'PENDING', now())","time":{"start":1697105199827,"stop":1697105199827,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42d2-790e-ba86-577f04152a08', '018b235a-42cb-744e-b1b9-0ca32d402961', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6f334ec2"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105199831,"stop":1697105199836,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42d7-7e9f-981c-3cc92ac89a41', '018b235a-42cb-744e-b1b9-0ca32d402961', 'REJECTED', now())","time":{"start":1697105199831,"stop":1697105199831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-42d7-7e9f-981c-3cc92ac89a41', '018b235a-42cb-744e-b1b9-0ca32d402961', 'REJECTED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@78a6ffe3"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: member lists their subscriptions","time":{"start":1697105199838,"stop":1697105199838,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e/room-018b235a-4201-7437-9b36-4c440a1b405e/subscriptions","time":{"start":1697105199838,"stop":1697105199918,"duration":80},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e/room-018b235a-4201-7437-9b36-4c440a1b405e/subscriptions","time":{"start":1697105199838,"stop":1697105199918,"duration":80},"status":"passed","steps":[],"attachments":[{"uid":"865aa79310b4e255","name":"Request","source":"865aa79310b4e255.html","type":"text/html","size":789},{"uid":"f3c82920f8c171a6","name":"HTTP/1.1 200 ","source":"f3c82920f8c171a6.html","type":"text/html","size":1511}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e"},{"name":"roomId","value":"room-018b235a-4201-7437-9b36-4c440a1b405e"},{"name":"status","value":"REJECTED"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-4201-7437-9b36-4c440a1b405e"},{"name":"roomId","value":"room-018b235a-4201-7437-9b36-4c440a1b405e"},{"name":"status","value":"REJECTED"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: listing of subscription succeeds","time":{"start":1697105199918,"stop":1697105199918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: correct subscriptions are returned","time":{"start":1697105199919,"stop":1697105199919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105200281,"stop":1697105200281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":31},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests"},{"name":"testMethod","value":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=REJECTED subscriptions; Then: listing of subscription succeeds and REJECTED subscriptions are returned"},{"name":"suite","value":"ListSubscriptionsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC4.2 - Successful subscriptions listing"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/subscriptions"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"returnedStatus","value":"REJECTED"},{"name":"returnedSubscriptionsCount","value":"1"},{"name":"status","value":"REJECTED"}],"links":[{"name":"UC4.2","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"cf91efc2e4841f8e.json","parameterValues":["REJECTED","1","REJECTED"]}