{"uid":"339c3e9d202a82cd","name":"Given: an event type with 1 active PUSH subscription with pushUrl response: 200; When: message is published; Then: publish succeeds and 1 event is created, published and delivered with correct data","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type with 1 active PUSH subscription with pushUrl response: #responseStatus; When: message is published; Then: publish succeeds and 1 event is created, published and delivered with correct data","historyId":"e16ef0f3f6029bb7b753418a0c83e172","time":{"start":1697105214411,"stop":1697105216045,"duration":1634},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type with 1 active PUSH subscription","time":{"start":1697105214505,"stop":1697105214505,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"WIREMOCK POST /mappings","time":{"start":1697105214525,"stop":1697105214903,"duration":378},"status":"passed","steps":[],"attachments":[{"uid":"79bc2efc310a0ec0","name":"Request","source":"79bc2efc310a0ec0.html","type":"text/html","size":818},{"uid":"4439fa8580e85f4d","name":"HTTP/1.1 201 Created","source":"4439fa8580e85f4d.html","type":"text/html","size":643}],"parameters":[{"name":"mappings","value":"{request={method=POST, url=/api/callback/018b235a-7bcb-7a7f-953f-07a12a7561ee}, response={status=200}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0},{"name":"DB query","time":{"start":1697105214905,"stop":1697105214910,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-7db9-741f-bc2c-1775baa5b5fd', '018b235a-7bfb-7d82-96b8-c9e67e1211d1', '018b235a-7c01-7c50-b6a2-f961a2335dac', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-7bcb-7a7f-953f-07a12a7561ee', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/api/callback/018b235a-7bcb-7a7f-953f-07a12a7561ee\"}', '[{\"at\": \"2023-10-12T10:06:54.905234400Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105214905,"stop":1697105214905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-7db9-741f-bc2c-1775baa5b5fd', '018b235a-7bfb-7d82-96b8-c9e67e1211d1', '018b235a-7c01-7c50-b6a2-f961a2335dac', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-7bcb-7a7f-953f-07a12a7561ee', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/api/callback/018b235a-7bcb-7a7f-953f-07a12a7561ee\"}', '[{\"at\": \"2023-10-12T10:06:54.905234400Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@30dd9615"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105214911,"stop":1697105214915,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-7dbe-7bc7-9306-1df82bfc09a1', '018b235a-7db9-741f-bc2c-1775baa5b5fd', 'PENDING', now())","time":{"start":1697105214911,"stop":1697105214911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-7dbe-7bc7-9306-1df82bfc09a1', '018b235a-7db9-741f-bc2c-1775baa5b5fd', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@35db3ea2"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105214916,"stop":1697105214920,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-7dc4-7afb-afbc-e3aa07ce1f85', '018b235a-7db9-741f-bc2c-1775baa5b5fd', 'ACTIVE', now())","time":{"start":1697105214916,"stop":1697105214916,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-7dc4-7afb-afbc-e3aa07ce1f85', '018b235a-7db9-741f-bc2c-1775baa5b5fd', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2c27e36"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105214920,"stop":1697105214924,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:06:54.920657700Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'","time":{"start":1697105214920,"stop":1697105214920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:06:54.920657700Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@128921c4"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: message is published","time":{"start":1697105214925,"stop":1697105214925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-7bcb-7a7f-953f-07a12a7561ee/room-018b235a-7bcb-7a7f-953f-07a12a7561ee/publish","time":{"start":1697105214926,"stop":1697105215058,"duration":132},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-7bcb-7a7f-953f-07a12a7561ee/room-018b235a-7bcb-7a7f-953f-07a12a7561ee/publish","time":{"start":1697105214926,"stop":1697105215058,"duration":132},"status":"passed","steps":[],"attachments":[{"uid":"f7d1b85be43c774c","name":"Request","source":"f7d1b85be43c774c.html","type":"text/html","size":1160},{"uid":"6f8d87eb012ba8cc","name":"HTTP/1.1 200 OK","source":"6f8d87eb012ba8cc.html","type":"text/html","size":315}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-7bcb-7a7f-953f-07a12a7561ee"},{"name":"roomId","value":"room-018b235a-7bcb-7a7f-953f-07a12a7561ee"},{"name":"message","value":"{eventType=EVENT-018b235a-7bcb-7a7f-953f-07a12a7561ee, content={payload=test}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-7bcb-7a7f-953f-07a12a7561ee"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-7bcb-7a7f-953f-07a12a7561ee"},{"name":"roomId","value":"room-018b235a-7bcb-7a7f-953f-07a12a7561ee"},{"name":"message","value":"{eventType=EVENT-018b235a-7bcb-7a7f-953f-07a12a7561ee, content={payload=test}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: publish succeeds","time":{"start":1697105215059,"stop":1697105215059,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: 1 event is created","time":{"start":1697105215060,"stop":1697105215060,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105215060,"stop":1697105215066,"duration":6},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215061,"stop":1697105215066,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-7bfb-7d82-96b8-c9e67e1211d1'\n  AND event_type_version_id = '018b235a-7c0d-7a8a-af26-303e54de8c52'\n  AND event_type_id = '018b235a-7c01-7c50-b6a2-f961a2335dac'\n  AND publisher_id = '018b235a-7c14-77c1-89bb-ec29d75ffb24'","time":{"start":1697105215061,"stop":1697105215061,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-7bfb-7d82-96b8-c9e67e1211d1'\n  AND event_type_version_id = '018b235a-7c0d-7a8a-af26-303e54de8c52'\n  AND event_type_id = '018b235a-7c01-7c50-b6a2-f961a2335dac'\n  AND publisher_id = '018b235a-7c14-77c1-89bb-ec29d75ffb24'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@1f44c6b6"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(1):","time":{"start":1697105215066,"stop":1697105215066,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-7df6-7d20-9e0c-713ada24e66c, room_id:018b235a-7bfb-7d82-96b8-c9e67e1211d1, event_type_version_id:018b235a-7c0d-7a8a-af26-303e54de8c52, event_type_id:018b235a-7c01-7c50-b6a2-f961a2335dac, publisher_id:018b235a-7c14-77c1-89bb-ec29d75ffb24, correlation_id:018b235a-7df6-7eaf-9c7d-ce219f04f761, created_at:2023-10-12 13:06:54.966184]","time":{"start":1697105215066,"stop":1697105215066,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-7bfb-7d82-96b8-c9e67e1211d1'\n  AND event_type_version_id = '018b235a-7c0d-7a8a-af26-303e54de8c52'\n  AND event_type_id = '018b235a-7c01-7c50-b6a2-f961a2335dac'\n  AND publisher_id = '018b235a-7c14-77c1-89bb-ec29d75ffb24'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4},{"name":"and: the event is published","time":{"start":1697105215103,"stop":1697105215103,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105215104,"stop":1697105215108,"duration":4},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215104,"stop":1697105215107,"duration":3},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n  AND published_at IS NOT NULL  AND subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'","time":{"start":1697105215104,"stop":1697105215104,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n  AND published_at IS NOT NULL  AND subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@35019e56"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(1):","time":{"start":1697105215107,"stop":1697105215107,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-7e02-76df-9527-f0be056d9375, event_id:018b235a-7df6-7d20-9e0c-713ada24e66c, subscription_id:018b235a-7db9-741f-bc2c-1775baa5b5fd, published_at:2023-10-12 13:06:54.978485, delivered_at:null]","time":{"start":1697105215108,"stop":1697105215108,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n  AND published_at IS NOT NULL  AND subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4},{"name":"and: the event is delivered","time":{"start":1697105215109,"stop":1697105215109,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"Waiting until","time":{"start":1697105215116,"stop":1697105215598,"duration":482},"status":"passed","steps":[{"name":"Waiting until","time":{"start":1697105215116,"stop":1697105215598,"duration":482},"status":"passed","steps":[{"name":"DB results","time":{"start":1697105215149,"stop":1697105215152,"duration":3},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215149,"stop":1697105215152,"duration":3},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215149,"stop":1697105215149,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@26ed4e27"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105215152,"stop":1697105215152,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"DB results","time":{"start":1697105215264,"stop":1697105215268,"duration":4},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215264,"stop":1697105215268,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215264,"stop":1697105215264,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2f975804"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105215268,"stop":1697105215268,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"DB results","time":{"start":1697105215369,"stop":1697105215376,"duration":7},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215369,"stop":1697105215375,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215369,"stop":1697105215369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@63cdae1d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105215375,"stop":1697105215375,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"DB results","time":{"start":1697105215477,"stop":1697105215482,"duration":5},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215477,"stop":1697105215482,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215477,"stop":1697105215477,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@17319443"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105215482,"stop":1697105215482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"DB results","time":{"start":1697105215584,"stop":1697105215591,"duration":7},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215584,"stop":1697105215590,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215584,"stop":1697105215584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@4358e209"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(1):","time":{"start":1697105215590,"stop":1697105215590,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-802a-797f-ad74-5b97777a932c, event_id:018b235a-7df6-7d20-9e0c-713ada24e66c, subscription_id:018b235a-7db9-741f-bc2c-1775baa5b5fd, published_at:null, delivered_at:2023-10-12 13:06:55.530872]","time":{"start":1697105215591,"stop":1697105215591,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4},{"name":"Condition met in 473 ms","time":{"start":1697105215598,"stop":1697105215598,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"condition","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests$__spock_feature_1_2_closure2@2cc76912"},{"name":"timeoutMs","value":"30000"},{"name":"waitTimeMs","value":"100"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":22}],"attachments":[],"parameters":[{"name":"condition","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests$__spock_feature_1_2_closure2@2cc76912"},{"name":"timeoutMs","value":"30000"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":23},{"name":"DB results","time":{"start":1697105215599,"stop":1697105215605,"duration":6},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105215599,"stop":1697105215603,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'","time":{"start":1697105215599,"stop":1697105215599,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@3217ac36"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(1):","time":{"start":1697105215604,"stop":1697105215604,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-802a-797f-ad74-5b97777a932c, event_id:018b235a-7df6-7d20-9e0c-713ada24e66c, subscription_id:018b235a-7db9-741f-bc2c-1775baa5b5fd, published_at:null, delivered_at:2023-10-12 13:06:55.530872]","time":{"start":1697105215605,"stop":1697105215605,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-7db9-741f-bc2c-1775baa5b5fd'\n  AND delivered_at IS NOT NULL  AND event_id = '018b235a-7df6-7d20-9e0c-713ada24e66c'\n"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4},{"name":"WIREMOCK POST /requests/find","time":{"start":1697105215608,"stop":1697105215809,"duration":201},"status":"passed","steps":[],"attachments":[{"uid":"c04d21de73a56f17","name":"Request","source":"c04d21de73a56f17.html","type":"text/html","size":692},{"uid":"5e68f843508a3390","name":"HTTP/1.1 200 OK","source":"5e68f843508a3390.html","type":"text/html","size":1821}],"parameters":[{"name":"data","value":"{method=POST, url=/api/callback/018b235a-7bcb-7a7f-953f-07a12a7561ee}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0},{"name":"where","time":{"start":1697105216045,"stop":1697105216045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":6,"hasContent":true,"stepsCount":58},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type with 1 active PUSH subscription with pushUrl response: 200; When: message is published; Then: publish succeeds and 1 event is created, published and delivered with correct data"},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.2 - Successful publish & push"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"responseStatus","value":"200"}],"links":[{"name":"UC6.2","type":"tms"},{"name":"UC6.1","type":"tms"},{"name":"M604017-173","url":"https://jira.nortal.com/browse/M604017-173","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"339c3e9d202a82cd.json","parameterValues":["200"]}