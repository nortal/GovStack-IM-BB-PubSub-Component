{"uid":"40ba91f2ce551a11","name":"Given: an event type; When: a message missing 'both'; Then: publish fails with 'Invalid data for publishing event'","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type; When: a message missing '#missingField'; Then: publish fails with 'Invalid data for publishing event'","historyId":"76f07c990fcabcf8a4857a781fe77fda","time":{"start":1697105222300,"stop":1697105222501,"duration":201},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type","time":{"start":1697105222357,"stop":1697105222357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: message with a problem is published","time":{"start":1697105222357,"stop":1697105222357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9a9c-7e83-bfff-62a59f6fe04e/room-018b235a-9a9c-7e83-bfff-62a59f6fe04e/publish","time":{"start":1697105222357,"stop":1697105222391,"duration":34},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9a9c-7e83-bfff-62a59f6fe04e/room-018b235a-9a9c-7e83-bfff-62a59f6fe04e/publish","time":{"start":1697105222357,"stop":1697105222391,"duration":34},"status":"passed","steps":[],"attachments":[{"uid":"c98e1d321ea23aa8","name":"Request","source":"c98e1d321ea23aa8.html","type":"text/html","size":846},{"uid":"f36b7db5a94b4c9b","name":"HTTP/1.1 400 Bad Request","source":"f36b7db5a94b4c9b.html","type":"text/html","size":577}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9a9c-7e83-bfff-62a59f6fe04e"},{"name":"roomId","value":"room-018b235a-9a9c-7e83-bfff-62a59f6fe04e"},{"name":"message","value":"{}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-9a9c-7e83-bfff-62a59f6fe04e"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9a9c-7e83-bfff-62a59f6fe04e"},{"name":"roomId","value":"room-018b235a-9a9c-7e83-bfff-62a59f6fe04e"},{"name":"message","value":"{}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: publish fails","time":{"start":1697105222391,"stop":1697105222391,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: no events created","time":{"start":1697105222482,"stop":1697105222482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105222483,"stop":1697105222501,"duration":18},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105222483,"stop":1697105222500,"duration":17},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9aba-7a6b-8e43-0635cdfabf8b'\n  AND event_type_version_id = '018b235a-9ac4-79b1-b0c8-1c139f0d1067'\n  AND event_type_id = '018b235a-9abf-70d5-bfae-a17cbb8f97ee'\n  AND publisher_id = '018b235a-9ac9-76c9-81a9-ea6b4f539a0d'","time":{"start":1697105222485,"stop":1697105222485,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9aba-7a6b-8e43-0635cdfabf8b'\n  AND event_type_version_id = '018b235a-9ac4-79b1-b0c8-1c139f0d1067'\n  AND event_type_id = '018b235a-9abf-70d5-bfae-a17cbb8f97ee'\n  AND publisher_id = '018b235a-9ac9-76c9-81a9-ea6b4f539a0d'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@3bd42f5b"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105222500,"stop":1697105222500,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9aba-7a6b-8e43-0635cdfabf8b'\n  AND event_type_version_id = '018b235a-9ac4-79b1-b0c8-1c139f0d1067'\n  AND event_type_id = '018b235a-9abf-70d5-bfae-a17cbb8f97ee'\n  AND publisher_id = '018b235a-9ac9-76c9-81a9-ea6b4f539a0d'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"where","time":{"start":1697105222501,"stop":1697105222501,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":11},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type; When: a message missing 'both'; Then: publish fails with 'Invalid data for publishing event'"},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.1 - Unsuccessful publish"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"missingField","value":"both"}],"links":[{"name":"UC6.1","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"40ba91f2ce551a11.json","parameterValues":["both"]}