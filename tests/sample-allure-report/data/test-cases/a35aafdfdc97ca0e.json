{"uid":"a35aafdfdc97ca0e","name":"Given: an event type; When: a message has a problem with 'X-Road-Client' header missing; Then: publish fails with 'Technical error'","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type; When: a message has a problem with 'X-Road-Client' header #xRoadHeader; Then: publish fails with 'Technical error'","historyId":"11cdb6cfe761c3a703b5b074ce64e829","time":{"start":1697105222510,"stop":1697105222720,"duration":210},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type","time":{"start":1697105222603,"stop":1697105222603,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: message with a problem is published","time":{"start":1697105222604,"stop":1697105222604,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9b6e-75c2-8f29-c8f0ba73842f/room-018b235a-9b6e-75c2-8f29-c8f0ba73842f/publish","time":{"start":1697105222604,"stop":1697105222652,"duration":48},"status":"passed","steps":[],"attachments":[{"uid":"9b2d108d9a86895f","name":"Request","source":"9b2d108d9a86895f.html","type":"text/html","size":970},{"uid":"d288895efed758d2","name":"HTTP/1.1 500 Internal Server Error","source":"d288895efed758d2.html","type":"text/html","size":387}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9b6e-75c2-8f29-c8f0ba73842f"},{"name":"roomId","value":"room-018b235a-9b6e-75c2-8f29-c8f0ba73842f"},{"name":"message","value":"{eventType=EVENT-018b235a-9b6e-75c2-8f29-c8f0ba73842f, content={payload=test}}"},{"name":"header","value":"null"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0},{"name":"then: publish fails","time":{"start":1697105222653,"stop":1697105222653,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: no events created","time":{"start":1697105222715,"stop":1697105222715,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105222716,"stop":1697105222719,"duration":3},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105222716,"stop":1697105222719,"duration":3},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9ba9-7bc8-8d45-46914b5a2c6e'\n  AND event_type_version_id = '018b235a-9bb5-7878-8e04-0f203fc801ca'\n  AND event_type_id = '018b235a-9baf-778d-b447-561aa873aeb3'\n  AND publisher_id = '018b235a-9bbb-70f8-9e89-8fb881a5ed79'","time":{"start":1697105222716,"stop":1697105222716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9ba9-7bc8-8d45-46914b5a2c6e'\n  AND event_type_version_id = '018b235a-9bb5-7878-8e04-0f203fc801ca'\n  AND event_type_id = '018b235a-9baf-778d-b447-561aa873aeb3'\n  AND publisher_id = '018b235a-9bbb-70f8-9e89-8fb881a5ed79'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@765e4ccc"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105222719,"stop":1697105222719,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9ba9-7bc8-8d45-46914b5a2c6e'\n  AND event_type_version_id = '018b235a-9bb5-7878-8e04-0f203fc801ca'\n  AND event_type_id = '018b235a-9baf-778d-b447-561aa873aeb3'\n  AND publisher_id = '018b235a-9bbb-70f8-9e89-8fb881a5ed79'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"where","time":{"start":1697105222720,"stop":1697105222720,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":10},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type; When: a message has a problem with 'X-Road-Client' header missing; Then: publish fails with 'Technical error'"},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.1 - Unsuccessful publish"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"xRoadHeader","value":"missing"}],"links":[{"name":"UC6.1","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"a35aafdfdc97ca0e.json","parameterValues":["missing"]}