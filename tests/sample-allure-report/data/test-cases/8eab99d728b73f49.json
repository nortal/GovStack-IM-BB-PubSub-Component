{"uid":"8eab99d728b73f49","name":"Given: a manager with a room; When: manager gets their room details with a problem ''X-Road-Client' header not matching 'memberId''; Then: getting room details fails with 403: 'Forbidden'","fullName":"com.govstack.information_mediator.pubsub.api.management.rooms.GetRoomDetailsTests.Given: a manager with a room; When: manager gets their room details with a problem '#problem'; Then: getting room details fails with #statusCode: '#message'","historyId":"537034ce9c3c772ac1aa9d065b68a157","time":{"start":1697105194026,"stop":1697105194231,"duration":205},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup","time":{"start":1697105194027,"stop":1697105194083,"duration":56},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105194067,"stop":1697105194075,"duration":8},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO managers(id, identifier_type, identifier, created_at, deleted_at)\nVALUES ('018b235a-2c2b-73ae-9953-66d86eabeb4a', 'XROAD', 'SANDBOX:ORG:TEST:MANAGER-018b235a-2c2b-7795-b774-4aa2fad42f18', now(), NULL)","time":{"start":1697105194067,"stop":1697105194067,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO managers(id, identifier_type, identifier, created_at, deleted_at)\nVALUES ('018b235a-2c2b-73ae-9953-66d86eabeb4a', 'XROAD', 'SANDBOX:ORG:TEST:MANAGER-018b235a-2c2b-7795-b774-4aa2fad42f18', now(), NULL)\n"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@4e0b9055"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105194076,"stop":1697105194082,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO rooms (id, manager_id, identifier, \"configuration\", journal, deleted_at) VALUES ('018b235a-2c5b-7d20-a926-ba4f5006fbbe', '018b235a-2c2b-73ae-9953-66d86eabeb4a', 'room-018b235a-2c2b-7795-b774-4aa2fad42f18', '{\"messageExpiration\": 0, \"deliveryDelay\": 1, \"deliveryDelayMultiplier\": 1.01, \"deliveryAttempts\": 3}', '[{\"at\": \"2023-10-12T10:06:34.075898300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105194076,"stop":1697105194076,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO rooms (id, manager_id, identifier, \"configuration\", journal, deleted_at) VALUES ('018b235a-2c5b-7d20-a926-ba4f5006fbbe', '018b235a-2c2b-73ae-9953-66d86eabeb4a', 'room-018b235a-2c2b-7795-b774-4aa2fad42f18', '{\"messageExpiration\": 0, \"deliveryDelay\": 1, \"deliveryDelayMultiplier\": 1.01, \"deliveryAttempts\": 3}', '[{\"at\": \"2023-10-12T10:06:34.075898300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6000b869"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4}],"testStage":{"status":"passed","steps":[{"name":"given: a manager with a room","time":{"start":1697105194084,"stop":1697105194084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: manager gets their room details with a problem","time":{"start":1697105194084,"stop":1697105194084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:MANAGER-018b235a-2c2b-7795-b774-4aa2fad42f18/room-018b235a-2c2b-7795-b774-4aa2fad42f18","time":{"start":1697105194085,"stop":1697105194137,"duration":52},"status":"passed","steps":[],"attachments":[{"uid":"d2d13c270032cff9","name":"Request","source":"d2d13c270032cff9.html","type":"text/html","size":619},{"uid":"eeab5a66f3f1c638","name":"HTTP/1.1 403 ","source":"eeab5a66f3f1c638.html","type":"text/html","size":1004}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:MANAGER-018b235a-2c2b-7795-b774-4aa2fad42f18"},{"name":"roomId","value":"room-018b235a-2c2b-7795-b774-4aa2fad42f18"},{"name":"header","value":"X-Road-Client=non-existent"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0},{"name":"then: getting room details fails","time":{"start":1697105194137,"stop":1697105194137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105194231,"stop":1697105194231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":5},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.rooms"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.rooms.GetRoomDetailsTests"},{"name":"testMethod","value":"Given: a manager with a room; When: manager gets their room details with a problem ''X-Road-Client' header not matching 'memberId''; Then: getting room details fails with 403: 'Forbidden'"},{"name":"suite","value":"GetRoomDetailsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"Unsuccessful get room details"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"message","value":"Forbidden"},{"name":"problem","value":"'X-Road-Client' header not matching 'memberId'"},{"name":"statusCode","value":"403"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"8eab99d728b73f49.json","parameterValues":["Forbidden","'X-Road-Client' header not matching 'memberId'","403"]}