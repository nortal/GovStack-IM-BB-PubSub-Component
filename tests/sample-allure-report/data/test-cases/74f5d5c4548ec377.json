{"uid":"74f5d5c4548ec377","name":"Given: 2 event types with 1 active PULL subscription and 3 published message across event types; When: messages are pulled successfully in a loop; Then: no more events in queue and messages marked as delivered","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PullTests.Given: 2 event types with 1 active PULL subscription and 3 published message across event types; When: messages are pulled successfully in a loop; Then: no more events in queue and messages marked as delivered","historyId":"91516f9cc01bfa3eee5913ecbcc0e863","time":{"start":1697105223457,"stop":1697105224389,"duration":932},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: 2 event type with 1 active PULL subscription and 3 published message across event types","time":{"start":1697105223533,"stop":1697105223533,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105223534,"stop":1697105223540,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-9f6d-7f1c-9855-62eb208455f5', '018b235a-9f4c-704f-9e81-37c4db591f70', '018b235a-9f54-7375-b397-c6e7313ef00b', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:07:03.533968500Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105223534,"stop":1697105223534,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-9f6d-7f1c-9855-62eb208455f5', '018b235a-9f4c-704f-9e81-37c4db591f70', '018b235a-9f54-7375-b397-c6e7313ef00b', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:07:03.533968500Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@10af6715"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223540,"stop":1697105223545,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-9f74-72e0-9871-76bc7ae2c047', '018b235a-9f6d-7f1c-9855-62eb208455f5', 'PENDING', now())","time":{"start":1697105223540,"stop":1697105223540,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-9f74-72e0-9871-76bc7ae2c047', '018b235a-9f6d-7f1c-9855-62eb208455f5', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@425fdf53"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223546,"stop":1697105223550,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-9f7a-759a-8020-1140f8a4bd9c', '018b235a-9f6d-7f1c-9855-62eb208455f5', 'ACTIVE', now())","time":{"start":1697105223546,"stop":1697105223546,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-9f7a-759a-8020-1140f8a4bd9c', '018b235a-9f6d-7f1c-9855-62eb208455f5', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@589b445d"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223550,"stop":1697105223554,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:07:03.550186800Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-9f6d-7f1c-9855-62eb208455f5'","time":{"start":1697105223550,"stop":1697105223550,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:07:03.550186800Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-9f6d-7f1c-9855-62eb208455f5'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2ad404c0"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223555,"stop":1697105223663,"duration":108},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223555,"stop":1697105223663,"duration":108},"status":"passed","steps":[],"attachments":[{"uid":"6b9d42925332b984","name":"Request","source":"6b9d42925332b984.html","type":"text/html","size":1160},{"uid":"75795552f3fe1fda","name":"HTTP/1.1 200 OK","source":"75795552f3fe1fda.html","type":"text/html","size":315}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223666,"stop":1697105223782,"duration":116},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223666,"stop":1697105223782,"duration":116},"status":"passed","steps":[],"attachments":[{"uid":"5a1588629ce3e026","name":"Request","source":"5a1588629ce3e026.html","type":"text/html","size":1162},{"uid":"7fc3928bcb88fc86","name":"HTTP/1.1 200 OK","source":"7fc3928bcb88fc86.html","type":"text/html","size":315}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test2}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test2}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223783,"stop":1697105223796,"duration":13},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO event_types(id, room_id, identifier, journal, deleted_at) VALUES ('018b235a-a067-75d4-a5d9-d94f1b72d755', '018b235a-9f4c-704f-9e81-37c4db591f70', '2-EVENT-018b235a-9f22-7d91-939d-5613948b01a5', '[{\"at\": \"2023-10-12T10:07:03.783910900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105223783,"stop":1697105223783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO event_types(id, room_id, identifier, journal, deleted_at) VALUES ('018b235a-a067-75d4-a5d9-d94f1b72d755', '018b235a-9f4c-704f-9e81-37c4db591f70', '2-EVENT-018b235a-9f22-7d91-939d-5613948b01a5', '[{\"at\": \"2023-10-12T10:07:03.783910900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@542953f9"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223796,"stop":1697105223802,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO event_type_versions (id, event_type_id, \"version\", json_schema, journal, deleted_at) VALUES('018b235a-a074-7ec1-a425-bf2b7a72cf4e', '018b235a-a067-75d4-a5d9-d94f1b72d755', 1, '{\n   \"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\n   \"$id\":\"https://example.com/event-type.schema.json\",\n   \"title\":\"EVENT-001 Schema\",\n   \"description\":\"Any content\",\n   \"type\":\"object\",\n   \"properties\":{\n      \"payload\":{\n         \"type\":\"string\",\n         \"description\":\"The content of the payload\"\n      }\n   },\n   \"required\":[\n      \"payload\"\n   ]\n}', '[{\"at\": \"2023-10-12T10:07:03.796914300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105223796,"stop":1697105223796,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO event_type_versions (id, event_type_id, \"version\", json_schema, journal, deleted_at) VALUES('018b235a-a074-7ec1-a425-bf2b7a72cf4e', '018b235a-a067-75d4-a5d9-d94f1b72d755', 1, '{\n   \"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\n   \"$id\":\"https://example.com/event-type.schema.json\",\n   \"title\":\"EVENT-001 Schema\",\n   \"description\":\"Any content\",\n   \"type\":\"object\",\n   \"properties\":{\n      \"payload\":{\n         \"type\":\"string\",\n         \"description\":\"The content of the payload\"\n      }\n   },\n   \"required\":[\n      \"payload\"\n   ]\n}', '[{\"at\": \"2023-10-12T10:07:03.796914300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@1122c793"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223803,"stop":1697105223807,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO publisher_constraints (id, publisher_id, event_type_id, created_at, deleted_at) VALUES ('018b235a-a07a-7a0f-aacf-ab3c4cb6eb31', '018b235a-9f60-7cf4-a0c5-d4af15dd97a3', '018b235a-a067-75d4-a5d9-d94f1b72d755', now(), NULL)","time":{"start":1697105223803,"stop":1697105223803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO publisher_constraints (id, publisher_id, event_type_id, created_at, deleted_at) VALUES ('018b235a-a07a-7a0f-aacf-ab3c4cb6eb31', '018b235a-9f60-7cf4-a0c5-d4af15dd97a3', '018b235a-a067-75d4-a5d9-d94f1b72d755', now(), NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@7aef5ab9"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223808,"stop":1697105223813,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-a080-7d15-9f61-9b608b02f599', '018b235a-9f4c-704f-9e81-37c4db591f70', '018b235a-a067-75d4-a5d9-d94f1b72d755', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:07:03.808914700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105223808,"stop":1697105223808,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-a080-7d15-9f61-9b608b02f599', '018b235a-9f4c-704f-9e81-37c4db591f70', '018b235a-a067-75d4-a5d9-d94f1b72d755', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:07:03.808914700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6eb568fc"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223813,"stop":1697105223818,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-a085-7f0f-bbf8-1a2961a86593', '018b235a-a080-7d15-9f61-9b608b02f599', 'PENDING', now())","time":{"start":1697105223813,"stop":1697105223813,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-a085-7f0f-bbf8-1a2961a86593', '018b235a-a080-7d15-9f61-9b608b02f599', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@709d5848"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223819,"stop":1697105223823,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-a08b-7ebc-a736-ea9b79d0033c', '018b235a-a080-7d15-9f61-9b608b02f599', 'ACTIVE', now())","time":{"start":1697105223819,"stop":1697105223819,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-a08b-7ebc-a736-ea9b79d0033c', '018b235a-a080-7d15-9f61-9b608b02f599', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@77841797"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105223824,"stop":1697105223828,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:07:03.823686200Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-a080-7d15-9f61-9b608b02f599'","time":{"start":1697105223824,"stop":1697105223824,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"UPDATE subscriptions\nSET journal = journal || '[{\"at\": \"2023-10-12T10:07:03.823686200Z\", \"by\": \"TESTS\", \"action\": \"MODIFIED\"}]'::JSONB\nWHERE id = '018b235a-a080-7d15-9f61-9b608b02f599'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@773eb14c"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223829,"stop":1697105223957,"duration":128},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/publish","time":{"start":1697105223829,"stop":1697105223957,"duration":128},"status":"passed","steps":[],"attachments":[{"uid":"28549521c4be7d3a","name":"Request","source":"28549521c4be7d3a.html","type":"text/html","size":1166},{"uid":"54421b5f616ad7c2","name":"HTTP/1.1 200 OK","source":"54421b5f616ad7c2.html","type":"text/html","size":315}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=2-EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test3}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"message","value":"{eventType=2-EVENT-018b235a-9f22-7d91-939d-5613948b01a5, content={payload=test3}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"when: messages are pulled successfully in a loop","time":{"start":1697105223957,"stop":1697105223957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/pull","time":{"start":1697105223960,"stop":1697105224244,"duration":284},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/pull","time":{"start":1697105223960,"stop":1697105224244,"duration":284},"status":"passed","steps":[],"attachments":[{"uid":"952b380607e632b5","name":"Request","source":"952b380607e632b5.html","type":"text/html","size":843},{"uid":"f8c9dd4792cb5b80","name":"HTTP/1.1 200 OK","source":"f8c9dd4792cb5b80.html","type":"text/html","size":331}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"subscriptionId","value":"018b235a-9f6d-7f1c-9855-62eb208455f5"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"subscriptionId","value":"018b235a-9f6d-7f1c-9855-62eb208455f5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/pull","time":{"start":1697105224249,"stop":1697105224383,"duration":134},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5/room-018b235a-9f22-7d91-939d-5613948b01a5/pull","time":{"start":1697105224249,"stop":1697105224383,"duration":134},"status":"passed","steps":[],"attachments":[{"uid":"2122084f03ea32f","name":"Request","source":"2122084f03ea32f.html","type":"text/html","size":843},{"uid":"32e991f1eb89fb16","name":"HTTP/1.1 200 OK","source":"32e991f1eb89fb16.html","type":"text/html","size":333}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"subscriptionId","value":"018b235a-9f6d-7f1c-9855-62eb208455f5"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"roomId","value":"room-018b235a-9f22-7d91-939d-5613948b01a5"},{"name":"subscriptionId","value":"018b235a-9f6d-7f1c-9855-62eb208455f5"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: no more events in queue and messages marked as delivered","time":{"start":1697105224385,"stop":1697105224385,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105224385,"stop":1697105224388,"duration":3},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105224385,"stop":1697105224388,"duration":3},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-9f6d-7f1c-9855-62eb208455f5'\n  AND delivered_at IS NOT NULL","time":{"start":1697105224386,"stop":1697105224386,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-9f6d-7f1c-9855-62eb208455f5'\n  AND delivered_at IS NOT NULL"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@561fdee3"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(2):","time":{"start":1697105224388,"stop":1697105224388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-a225-73b4-8907-318bb3200d70, event_id:018b235a-9fa7-77ba-bcd3-f39029d0d06a, subscription_id:018b235a-9f6d-7f1c-9855-62eb208455f5, published_at:null, delivered_at:2023-10-12 13:07:04.229051]","time":{"start":1697105224388,"stop":1697105224388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-a2b1-788b-8887-cac5927f107f, event_id:018b235a-a017-726b-bc36-5f05c6ce69f7, subscription_id:018b235a-9f6d-7f1c-9855-62eb208455f5, published_at:null, delivered_at:2023-10-12 13:07:04.369237]","time":{"start":1697105224388,"stop":1697105224388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE subscription_id = '018b235a-9f6d-7f1c-9855-62eb208455f5'\n  AND delivered_at IS NOT NULL"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":5}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":10,"hasContent":true,"stepsCount":41},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PullTests"},{"name":"testMethod","value":"Given: 2 event types with 1 active PULL subscription and 3 published message across event types; When: messages are pulled successfully in a loop; Then: no more events in queue and messages marked as delivered"},{"name":"suite","value":"PullTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.3 - Successful pull"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/pull"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"UC6.3","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"74f5d5c4548ec377.json","parameterValues":[]}