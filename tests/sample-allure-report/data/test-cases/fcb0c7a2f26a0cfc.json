{"uid":"fcb0c7a2f26a0cfc","name":"Given: a member with a subscription in a room; When: member lists their subscriptions with a problem 'terminated room'; Then: listing of subscription fails with 404","fullName":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests.Given: a member with a subscription in a room; When: member lists their subscriptions with a problem '#problem'; Then: listing of subscription fails with #statusCode","historyId":"2cb2d183bd0261319e23ee34cf3e2fd5","time":{"start":1697105203249,"stop":1697105203387,"duration":138},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: a member with a subscriptions status in a room;","time":{"start":1697105203302,"stop":1697105203302,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105203303,"stop":1697105203308,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-5066-72d6-8c32-9793c69b1299', '018b235a-5053-71e3-81c4-207613f29522', '018b235a-5059-7576-bebe-8471fb1721d3', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-5031-7b38-8951-19e1273c7f08', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:06:43.302660900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105203303,"stop":1697105203303,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-5066-72d6-8c32-9793c69b1299', '018b235a-5053-71e3-81c4-207613f29522', '018b235a-5059-7576-bebe-8471fb1721d3', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-5031-7b38-8951-19e1273c7f08', '{\"method\":\"PULL\"}', '[{\"at\": \"2023-10-12T10:06:43.302660900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@79611f57"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105203309,"stop":1697105203315,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-506d-7cb8-b841-6ba25df2e08c', '018b235a-5066-72d6-8c32-9793c69b1299', 'PENDING', now())","time":{"start":1697105203309,"stop":1697105203309,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-506d-7cb8-b841-6ba25df2e08c', '018b235a-5066-72d6-8c32-9793c69b1299', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@38e10ff0"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: member lists their subscriptions with a problem","time":{"start":1697105203315,"stop":1697105203315,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105203317,"stop":1697105203321,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n UPDATE rooms\nSET deleted_at = now()\nWHERE id = '018b235a-5053-71e3-81c4-207613f29522'","time":{"start":1697105203317,"stop":1697105203317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"UPDATE rooms\nSET deleted_at = now()\nWHERE id = '018b235a-5053-71e3-81c4-207613f29522'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@30df67b8"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-5031-7b38-8951-19e1273c7f08/room-018b235a-5031-7b38-8951-19e1273c7f08/subscriptions","time":{"start":1697105203321,"stop":1697105203360,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"ae1682bb6c52716c","name":"Request","source":"ae1682bb6c52716c.html","type":"text/html","size":757},{"uid":"9e03ef3aff465e04","name":"HTTP/1.1 404 ","source":"9e03ef3aff465e04.html","type":"text/html","size":832}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-5031-7b38-8951-19e1273c7f08"},{"name":"roomId","value":"room-018b235a-5031-7b38-8951-19e1273c7f08"},{"name":"status","value":"null"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-5031-7b38-8951-19e1273c7f08"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0},{"name":"then: listing of subscription fails","time":{"start":1697105203360,"stop":1697105203360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105203387,"stop":1697105203387,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":11},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests"},{"name":"testMethod","value":"Given: a member with a subscription in a room; When: member lists their subscriptions with a problem 'terminated room'; Then: listing of subscription fails with 404"},{"name":"suite","value":"ListSubscriptionsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"Unsuccessful subscriptions listing"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/subscriptions"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"message","value":"Room was not found"},{"name":"problem","value":"terminated room"},{"name":"statusCode","value":"404"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"fcb0c7a2f26a0cfc.json","parameterValues":["Room was not found","terminated room","404"]}