{"uid":"31c2d5f72a72e3d5","name":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=PENDING subscriptions; Then: listing of subscription succeeds and PENDING subscriptions are returned","fullName":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests.Given: a member with subscriptions in different statuses in a room; When: member lists their status=#status subscriptions; Then: listing of subscription succeeds and #returnedStatus subscriptions are returned","historyId":"a5938555df141e03361ccd0edfb59892","time":{"start":1697105196780,"stop":1697105197892,"duration":1112},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: a member with subscriptions in different statuses in a room","time":{"start":1697105196860,"stop":1697105196860,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105196870,"stop":1697105196877,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3746-7190-b69b-1b100179a516', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-373c-7b52-b1fc-847869363bee\"}', '[{\"at\": \"2023-10-12T10:06:36.870209700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105196870,"stop":1697105196870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3746-7190-b69b-1b100179a516', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-373c-7b52-b1fc-847869363bee\"}', '[{\"at\": \"2023-10-12T10:06:36.870209700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@77ae2d25"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196877,"stop":1697105196885,"duration":8},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-374d-77ab-b4e3-67541fd46f5b', '018b235a-3746-7190-b69b-1b100179a516', 'PENDING', now())","time":{"start":1697105196878,"stop":1697105196878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-374d-77ab-b4e3-67541fd46f5b', '018b235a-3746-7190-b69b-1b100179a516', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@3f13ab39"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196889,"stop":1697105196895,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3758-72c1-93c3-94f4cd40547b', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3756-759d-bc85-e45f249133f9\"}', '[{\"at\": \"2023-10-12T10:06:36.888810100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105196889,"stop":1697105196889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3758-72c1-93c3-94f4cd40547b', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3756-759d-bc85-e45f249133f9\"}', '[{\"at\": \"2023-10-12T10:06:36.888810100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@54898111"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196896,"stop":1697105196901,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-375f-72c2-8b31-672cb0b3f3b8', '018b235a-3758-72c1-93c3-94f4cd40547b', 'PENDING', now())","time":{"start":1697105196896,"stop":1697105196896,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-375f-72c2-8b31-672cb0b3f3b8', '018b235a-3758-72c1-93c3-94f4cd40547b', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@1d7201cb"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196902,"stop":1697105196908,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3766-7b23-beb3-a41ee0e5e253', '018b235a-3758-72c1-93c3-94f4cd40547b', 'ACTIVE', now())","time":{"start":1697105196903,"stop":1697105196903,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3766-7b23-beb3-a41ee0e5e253', '018b235a-3758-72c1-93c3-94f4cd40547b', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@1bb3d045"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196920,"stop":1697105196932,"duration":12},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3777-7c93-bfb9-f023a6b8be6a', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-376c-7a66-b9a1-5b95fbf1420e\"}', '[{\"at\": \"2023-10-12T10:06:36.919464700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105196920,"stop":1697105196920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3777-7c93-bfb9-f023a6b8be6a', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-376c-7a66-b9a1-5b95fbf1420e\"}', '[{\"at\": \"2023-10-12T10:06:36.919464700Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@39dbea69"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196932,"stop":1697105196937,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3784-7606-9545-4b864a0b22df', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'PENDING', now())","time":{"start":1697105196933,"stop":1697105196933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3784-7606-9545-4b864a0b22df', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2142754a"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196940,"stop":1697105196946,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-378b-7e82-91f8-7739e4e0fbf5', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'ACTIVE', now())","time":{"start":1697105196940,"stop":1697105196940,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-378b-7e82-91f8-7739e4e0fbf5', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@2c3344f0"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196948,"stop":1697105196952,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3793-7607-9ceb-b1a099abc4a8', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'TERMINATED', now())","time":{"start":1697105196948,"stop":1697105196948,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3793-7607-9ceb-b1a099abc4a8', '018b235a-3777-7c93-bfb9-f023a6b8be6a', 'TERMINATED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@290798cb"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196954,"stop":1697105196961,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-379a-722e-8c76-ba5c8f4a70a2', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3799-7904-8114-e6542bbed31e\"}', '[{\"at\": \"2023-10-12T10:06:36.954954300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105196955,"stop":1697105196955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-379a-722e-8c76-ba5c8f4a70a2', '018b235a-371f-7495-a1e9-855beae7f605', '018b235a-3727-7624-9fdc-b9ab4905bd08', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3799-7904-8114-e6542bbed31e\"}', '[{\"at\": \"2023-10-12T10:06:36.954954300Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@4fe9a720"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196962,"stop":1697105196967,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-37a1-72be-bcbe-7222a444cceb', '018b235a-379a-722e-8c76-ba5c8f4a70a2', 'PENDING', now())","time":{"start":1697105196962,"stop":1697105196962,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-37a1-72be-bcbe-7222a444cceb', '018b235a-379a-722e-8c76-ba5c8f4a70a2', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@7db373b2"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105196968,"stop":1697105196973,"duration":5},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-37a8-7f9b-ad6b-55116bb5c3d0', '018b235a-379a-722e-8c76-ba5c8f4a70a2', 'REJECTED', now())","time":{"start":1697105196968,"stop":1697105196968,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-37a8-7f9b-ad6b-55116bb5c3d0', '018b235a-379a-722e-8c76-ba5c8f4a70a2', 'REJECTED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@4b91ac30"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: member lists their subscriptions","time":{"start":1697105196978,"stop":1697105196978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877/room-018b235a-36ed-7e2f-9a69-b70df8465877/subscriptions","time":{"start":1697105196979,"stop":1697105197201,"duration":222},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877/room-018b235a-36ed-7e2f-9a69-b70df8465877/subscriptions","time":{"start":1697105196980,"stop":1697105197201,"duration":221},"status":"passed","steps":[],"attachments":[{"uid":"5d7b8aed05c9ffbf","name":"Request","source":"5d7b8aed05c9ffbf.html","type":"text/html","size":787},{"uid":"cc3955fc73a875da","name":"HTTP/1.1 200 ","source":"cc3955fc73a875da.html","type":"text/html","size":1510}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877"},{"name":"roomId","value":"room-018b235a-36ed-7e2f-9a69-b70df8465877"},{"name":"status","value":"PENDING"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-36ed-7e2f-9a69-b70df8465877"},{"name":"roomId","value":"room-018b235a-36ed-7e2f-9a69-b70df8465877"},{"name":"status","value":"PENDING"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: listing of subscription succeeds","time":{"start":1697105197202,"stop":1697105197202,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: correct subscriptions are returned","time":{"start":1697105197204,"stop":1697105197204,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105197891,"stop":1697105197891,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":31},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests"},{"name":"testMethod","value":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=PENDING subscriptions; Then: listing of subscription succeeds and PENDING subscriptions are returned"},{"name":"suite","value":"ListSubscriptionsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC4.2 - Successful subscriptions listing"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/subscriptions"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"returnedStatus","value":"PENDING"},{"name":"returnedSubscriptionsCount","value":"1"},{"name":"status","value":"PENDING"}],"links":[{"name":"UC4.2","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"31c2d5f72a72e3d5.json","parameterValues":["PENDING","1","PENDING"]}