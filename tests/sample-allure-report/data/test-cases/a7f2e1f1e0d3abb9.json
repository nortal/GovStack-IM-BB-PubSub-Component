{"uid":"a7f2e1f1e0d3abb9","name":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=TERMINATED subscriptions; Then: listing of subscription succeeds and TERMINATED subscriptions are returned","fullName":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests.Given: a member with subscriptions in different statuses in a room; When: member lists their status=#status subscriptions; Then: listing of subscription succeeds and #returnedStatus subscriptions are returned","historyId":"9519d0afd0a98dba7a9477cf030de84d","time":{"start":1697105198692,"stop":1697105199597,"duration":905},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: a member with subscriptions in different statuses in a room","time":{"start":1697105198794,"stop":1697105198794,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB query","time":{"start":1697105198795,"stop":1697105198804,"duration":9},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3ecb-7091-a3e2-0945691ab639', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3eca-7395-b85b-298c88bc0cb4\"}', '[{\"at\": \"2023-10-12T10:06:38.795020100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198796,"stop":1697105198796,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3ecb-7091-a3e2-0945691ab639', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3eca-7395-b85b-298c88bc0cb4\"}', '[{\"at\": \"2023-10-12T10:06:38.795020100Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@72c50c9f"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198804,"stop":1697105198817,"duration":13},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ed4-7b97-91b0-b631ef2f1cff', '018b235a-3ecb-7091-a3e2-0945691ab639', 'PENDING', now())","time":{"start":1697105198804,"stop":1697105198804,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ed4-7b97-91b0-b631ef2f1cff', '018b235a-3ecb-7091-a3e2-0945691ab639', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@5e5e680b"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198818,"stop":1697105198826,"duration":8},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3ee2-7f45-898f-8576590e6171', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3ee1-77d2-8280-dfbb9998404d\"}', '[{\"at\": \"2023-10-12T10:06:38.818726900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198819,"stop":1697105198819,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3ee2-7f45-898f-8576590e6171', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3ee1-77d2-8280-dfbb9998404d\"}', '[{\"at\": \"2023-10-12T10:06:38.818726900Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@cf825e8"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198827,"stop":1697105198834,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3eea-79a1-be4e-e61d88a4f68a', '018b235a-3ee2-7f45-898f-8576590e6171', 'PENDING', now())","time":{"start":1697105198827,"stop":1697105198827,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3eea-79a1-be4e-e61d88a4f68a', '018b235a-3ee2-7f45-898f-8576590e6171', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@320684cd"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198835,"stop":1697105198846,"duration":11},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ef2-7fa1-824a-9b9ba5bb436e', '018b235a-3ee2-7f45-898f-8576590e6171', 'ACTIVE', now())","time":{"start":1697105198835,"stop":1697105198835,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3ef2-7fa1-824a-9b9ba5bb436e', '018b235a-3ee2-7f45-898f-8576590e6171', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@687dc7e6"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198848,"stop":1697105198855,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3efe-7e02-a890-1ed2c4cf9f51', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3efe-7dd0-a3cd-e109255d7ad4\"}', '[{\"at\": \"2023-10-12T10:06:38.847555500Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198848,"stop":1697105198848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3efe-7e02-a890-1ed2c4cf9f51', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3efe-7dd0-a3cd-e109255d7ad4\"}', '[{\"at\": \"2023-10-12T10:06:38.847555500Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@45cee4d2"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198855,"stop":1697105198875,"duration":20},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f07-71d7-b697-c0200ce3957b', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'PENDING', now())","time":{"start":1697105198856,"stop":1697105198856,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f07-71d7-b697-c0200ce3957b', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@8d44ee6"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198875,"stop":1697105198882,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f1b-7de8-8af3-d181434035fd', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'ACTIVE', now())","time":{"start":1697105198875,"stop":1697105198875,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f1b-7de8-8af3-d181434035fd', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'ACTIVE', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@e7283dd"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198882,"stop":1697105198889,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f22-7f2b-94cd-3dbbe6b22e11', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'TERMINATED', now())","time":{"start":1697105198883,"stop":1697105198883,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f22-7f2b-94cd-3dbbe6b22e11', '018b235a-3efe-7e02-a890-1ed2c4cf9f51', 'TERMINATED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@8b62702"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198891,"stop":1697105198897,"duration":6},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3f2a-7d14-8d93-8f895d95c2c1', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3f29-7617-9ced-5407afcaec73\"}', '[{\"at\": \"2023-10-12T10:06:38.891500800Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)","time":{"start":1697105198891,"stop":1697105198891,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscriptions (id, room_id, event_type_id, identifier_type, identifier, parameters, journal, deleted_at) VALUES ('018b235a-3f2a-7d14-8d93-8f895d95c2c1', '018b235a-3e9e-7e00-b137-6a33c7b20498', '018b235a-3eb1-7e8e-aebf-413de542e065', 'XROAD', 'SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037', '{\"method\":\"PUSH\",\"pushUrl\":\"http://wiremock:8080/018b235a-3f29-7617-9ced-5407afcaec73\"}', '[{\"at\": \"2023-10-12T10:06:38.891500800Z\", \"by\": \"TESTS\", \"action\": \"CREATED\"}]', NULL)"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@3aecbab2"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198898,"stop":1697105198910,"duration":12},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f32-7792-ac12-d6b8482c8647', '018b235a-3f2a-7d14-8d93-8f895d95c2c1', 'PENDING', now())","time":{"start":1697105198898,"stop":1697105198898,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f32-7792-ac12-d6b8482c8647', '018b235a-3f2a-7d14-8d93-8f895d95c2c1', 'PENDING', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@10e57077"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"DB query","time":{"start":1697105198911,"stop":1697105198918,"duration":7},"status":"passed","steps":[{"name":"Executing SQL query:\n INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f3e-7c33-bc01-7b2b82ffb35b', '018b235a-3f2a-7d14-8d93-8f895d95c2c1', 'REJECTED', now())","time":{"start":1697105198911,"stop":1697105198911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"INSERT INTO subscription_status (id, subscription_id, status, updated_at) VALUES ('018b235a-3f3e-7c33-bc01-7b2b82ffb35b', '018b235a-3f2a-7d14-8d93-8f895d95c2c1', 'REJECTED', now())"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@a9375dd"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"when: member lists their subscriptions","time":{"start":1697105198920,"stop":1697105198920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037/room-018b235a-3e65-7703-b59f-67c664969037/subscriptions","time":{"start":1697105198921,"stop":1697105199026,"duration":105},"status":"passed","steps":[{"name":"GET /rooms/SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037/room-018b235a-3e65-7703-b59f-67c664969037/subscriptions","time":{"start":1697105198921,"stop":1697105199026,"duration":105},"status":"passed","steps":[],"attachments":[{"uid":"6bd9dda60a161baa","name":"Request","source":"6bd9dda60a161baa.html","type":"text/html","size":793},{"uid":"daf3f8132b524fa4","name":"HTTP/1.1 200 ","source":"daf3f8132b524fa4.html","type":"text/html","size":1513}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037"},{"name":"roomId","value":"room-018b235a-3e65-7703-b59f-67c664969037"},{"name":"status","value":"TERMINATED"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:SUBSCRIBER-018b235a-3e65-7703-b59f-67c664969037"},{"name":"roomId","value":"room-018b235a-3e65-7703-b59f-67c664969037"},{"name":"status","value":"TERMINATED"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: listing of subscription succeeds","time":{"start":1697105199026,"stop":1697105199026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: correct subscriptions are returned","time":{"start":1697105199027,"stop":1697105199027,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"where","time":{"start":1697105199597,"stop":1697105199597,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":31},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.management.subscriptions.ListSubscriptionsTests"},{"name":"testMethod","value":"Given: a member with subscriptions in different statuses in a room; When: member lists their status=TERMINATED subscriptions; Then: listing of subscription succeeds and TERMINATED subscriptions are returned"},{"name":"suite","value":"ListSubscriptionsTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC4.2 - Successful subscriptions listing"},{"name":"epic","value":"Management-api"},{"name":"feature","value":"GET /rooms/{memberId}/{roomId}/subscriptions"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"returnedStatus","value":"TERMINATED"},{"name":"returnedSubscriptionsCount","value":"1"},{"name":"status","value":"TERMINATED"}],"links":[{"name":"UC4.2","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"a7f2e1f1e0d3abb9.json","parameterValues":["TERMINATED","1","TERMINATED"]}