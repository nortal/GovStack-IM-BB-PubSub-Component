{"uid":"fd9e8c7e996063f5","name":"Given: an event type with no subscriptions; When: message is published; Then: publish succeeds and event is created and no message is published","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type with #subscriptionStatus; When: message is published; Then: publish succeeds and event is created and no message is published","historyId":"89b786794faffc066c83f2cd99b9dbd4","time":{"start":1697105210153,"stop":1697105212761,"duration":2608},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type with no active subscriptions","time":{"start":1697105210271,"stop":1697105210271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: message is published","time":{"start":1697105210273,"stop":1697105210273,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-6b2a-7e70-a37f-76f924aed690/room-018b235a-6b2a-7e70-a37f-76f924aed690/publish","time":{"start":1697105210295,"stop":1697105212716,"duration":2421},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-6b2a-7e70-a37f-76f924aed690/room-018b235a-6b2a-7e70-a37f-76f924aed690/publish","time":{"start":1697105210296,"stop":1697105212716,"duration":2420},"status":"passed","steps":[],"attachments":[{"uid":"df83ae29db098b9f","name":"Request","source":"df83ae29db098b9f.html","type":"text/html","size":1160},{"uid":"82fab8dbd6a41650","name":"HTTP/1.1 200 OK","source":"82fab8dbd6a41650.html","type":"text/html","size":315}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-6b2a-7e70-a37f-76f924aed690"},{"name":"roomId","value":"room-018b235a-6b2a-7e70-a37f-76f924aed690"},{"name":"message","value":"{eventType=EVENT-018b235a-6b2a-7e70-a37f-76f924aed690, content={payload=test}}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-6b2a-7e70-a37f-76f924aed690"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-6b2a-7e70-a37f-76f924aed690"},{"name":"roomId","value":"room-018b235a-6b2a-7e70-a37f-76f924aed690"},{"name":"message","value":"{eventType=EVENT-018b235a-6b2a-7e70-a37f-76f924aed690, content={payload=test}}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: publish succeeds","time":{"start":1697105212717,"stop":1697105212717,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: event is created","time":{"start":1697105212718,"stop":1697105212718,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105212722,"stop":1697105212727,"duration":5},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105212722,"stop":1697105212726,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-6b76-788f-a688-c9bce2301966'\n  AND event_type_version_id = '018b235a-6b88-7c61-9563-bbfb09c94440'\n  AND event_type_id = '018b235a-6b81-796d-b0f4-c73c70d21baf'\n  AND publisher_id = '018b235a-6b90-78d4-9fbb-994da1ea3a88'","time":{"start":1697105212722,"stop":1697105212722,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-6b76-788f-a688-c9bce2301966'\n  AND event_type_version_id = '018b235a-6b88-7c61-9563-bbfb09c94440'\n  AND event_type_id = '018b235a-6b81-796d-b0f4-c73c70d21baf'\n  AND publisher_id = '018b235a-6b90-78d4-9fbb-994da1ea3a88'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@28a4d87f"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(1):","time":{"start":1697105212727,"stop":1697105212727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"[id:018b235a-74b2-7c1f-b8a1-164faaf95d94, room_id:018b235a-6b76-788f-a688-c9bce2301966, event_type_version_id:018b235a-6b88-7c61-9563-bbfb09c94440, event_type_id:018b235a-6b81-796d-b0f4-c73c70d21baf, publisher_id:018b235a-6b90-78d4-9fbb-994da1ea3a88, correlation_id:018b235a-74a1-7a8c-9742-0f445097bf5b, created_at:2023-10-12 13:06:52.585369]","time":{"start":1697105212727,"stop":1697105212727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-6b76-788f-a688-c9bce2301966'\n  AND event_type_version_id = '018b235a-6b88-7c61-9563-bbfb09c94440'\n  AND event_type_id = '018b235a-6b81-796d-b0f4-c73c70d21baf'\n  AND publisher_id = '018b235a-6b90-78d4-9fbb-994da1ea3a88'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":4},{"name":"and: no message is published","time":{"start":1697105212754,"stop":1697105212754,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105212755,"stop":1697105212759,"duration":4},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105212755,"stop":1697105212759,"duration":4},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-74b2-7c1f-b8a1-164faaf95d94'\n  AND published_at IS NOT NULL","time":{"start":1697105212755,"stop":1697105212755,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-74b2-7c1f-b8a1-164faaf95d94'\n  AND published_at IS NOT NULL"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@10d2411f"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105212759,"stop":1697105212759,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM published_messages\nWHERE event_id = '018b235a-74b2-7c1f-b8a1-164faaf95d94'\n  AND published_at IS NOT NULL"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"where","time":{"start":1697105212760,"stop":1697105212760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":17},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type with no subscriptions; When: message is published; Then: publish succeeds and event is created and no message is published"},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.1 - Successful publish"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"subscriptionStatus","value":"no subscriptions"}],"links":[{"name":"UC6.1","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"fd9e8c7e996063f5.json","parameterValues":["no subscriptions"]}