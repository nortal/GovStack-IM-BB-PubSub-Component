{"uid":"7a162823637efa50","name":"Given: an event type; When: a message missing 'eventType'; Then: publish fails with 'Invalid data for publishing event'","fullName":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests.Given: an event type; When: a message missing '#missingField'; Then: publish fails with 'Invalid data for publishing event'","historyId":"2e79b64e696fc2b82fc575ade955d2b5","time":{"start":1697105221868,"stop":1697105222092,"duration":224},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"given: an event type","time":{"start":1697105221946,"stop":1697105221946,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"when: message with a problem is published","time":{"start":1697105221946,"stop":1697105221946,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-98ec-7375-ae68-8d61311561dd/room-018b235a-98ec-7375-ae68-8d61311561dd/publish","time":{"start":1697105221952,"stop":1697105222005,"duration":53},"status":"passed","steps":[{"name":"POST /rooms/SANDBOX:ORG:TEST:PUBLISHER-018b235a-98ec-7375-ae68-8d61311561dd/room-018b235a-98ec-7375-ae68-8d61311561dd/publish","time":{"start":1697105221952,"stop":1697105222005,"duration":53},"status":"passed","steps":[],"attachments":[{"uid":"d153b365d9252ba8","name":"Request","source":"d153b365d9252ba8.html","type":"text/html","size":846},{"uid":"7f7b78856fa68ca","name":"HTTP/1.1 400 Bad Request","source":"7f7b78856fa68ca.html","type":"text/html","size":577}],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-98ec-7375-ae68-8d61311561dd"},{"name":"roomId","value":"room-018b235a-98ec-7375-ae68-8d61311561dd"},{"name":"message","value":"{}"},{"name":"header","value":"X-Road-Client=SANDBOX:ORG:TEST:PUBLISHER-018b235a-98ec-7375-ae68-8d61311561dd"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"memberId","value":"SANDBOX:ORG:TEST:PUBLISHER-018b235a-98ec-7375-ae68-8d61311561dd"},{"name":"roomId","value":"room-018b235a-98ec-7375-ae68-8d61311561dd"},{"name":"message","value":"{}"}],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":1},{"name":"then: publish fails","time":{"start":1697105222007,"stop":1697105222007,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"and: no events created","time":{"start":1697105222087,"stop":1697105222087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"DB results","time":{"start":1697105222088,"stop":1697105222091,"duration":3},"status":"passed","steps":[{"name":"DB query","time":{"start":1697105222088,"stop":1697105222091,"duration":3},"status":"passed","steps":[{"name":"Executing SQL query:\n SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9916-7e8a-9d90-a5d45e368425'\n  AND event_type_version_id = '018b235a-9921-7f3f-be42-2e3a38ffd9c8'\n  AND event_type_id = '018b235a-991c-7fe4-b887-329d96445675'\n  AND publisher_id = '018b235a-992a-7b80-847b-45ae0a8d7166'","time":{"start":1697105222088,"stop":1697105222088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9916-7e8a-9d90-a5d45e368425'\n  AND event_type_version_id = '018b235a-9921-7f3f-be42-2e3a38ffd9c8'\n  AND event_type_id = '018b235a-991c-7fe4-b887-329d96445675'\n  AND publisher_id = '018b235a-992a-7b80-847b-45ae0a8d7166'"},{"name":"executionMethod","value":"org.codehaus.groovy.runtime.MethodClosure@6ef27af9"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":1},{"name":"Got rows(0):","time":{"start":1697105222091,"stop":1697105222091,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query","value":"SELECT *\nFROM EVENTS\nWHERE room_id = '018b235a-9916-7e8a-9d90-a5d45e368425'\n  AND event_type_version_id = '018b235a-9921-7f3f-be42-2e3a38ffd9c8'\n  AND event_type_id = '018b235a-991c-7fe4-b887-329d96445675'\n  AND publisher_id = '018b235a-992a-7b80-847b-45ae0a8d7166'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"stepsCount":3},{"name":"where","time":{"start":1697105222092,"stop":1697105222092,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"stepsCount":11},"afterStages":[],"labels":[{"name":"package","value":"com.govstack.information_mediator.pubsub.api.messaging"},{"name":"testClass","value":"com.govstack.information_mediator.pubsub.api.messaging.PublishTests"},{"name":"testMethod","value":"Given: an event type; When: a message missing 'eventType'; Then: publish fails with 'Invalid data for publishing event'"},{"name":"suite","value":"PublishTests"},{"name":"host","value":"lenovo1765"},{"name":"thread","value":"28024@lenovo1765.Test worker(1)"},{"name":"framework","value":"spock"},{"name":"language","value":"java"},{"name":"parentSuite","value":"GenericSpecification"},{"name":"story","value":"UC6.1 - Unsuccessful publish"},{"name":"epic","value":"Messaging-api"},{"name":"feature","value":"POST /rooms/{memberId}/{roomId}/publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"missingField","value":"eventType"}],"links":[{"name":"UC6.1","type":"tms"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"7a162823637efa50.json","parameterValues":["eventType"]}